/**
 * Stub engine — exports constants and a no-op createGame().
 * Allows the UI to build and render before the real engine (#65 / PR #75) merges.
 * Will be replaced by Artemis's full engine.
 */

import { useGameStore } from '../stores/gameStore';

export const COLS = 10;
export const ROWS = 20;

export const COLORS = {
  I: '#00f5ff',
  O: '#ffe600',
  T: '#bf00ff',
  S: '#39ff14',
  Z: '#ff073a',
  J: '#0047ff',
  L: '#ff6a00',
};

function emptyBoard() {
  return Array.from({ length: ROWS }, () => Array(COLS).fill(null));
}

export function createGame() {
  let board = emptyBoard();
  let status = 'idle';

  return {
    startGame() {
      board = emptyBoard();
      status = 'playing';
      useGameStore.getState().reset();
      useGameStore.getState().setStatus('playing');
    },
    pauseGame() {
      if (status === 'playing') {
        status = 'paused';
        useGameStore.getState().setStatus('paused');
      }
    },
    resumeGame() {
      if (status === 'paused') {
        status = 'playing';
        useGameStore.getState().setStatus('playing');
      }
    },
    move() {},
    rotate() {},
    drop() {},
    hold() {},
    tick() {},
    getState() {
      return {
        board,
        current: null,
        ghostRow: null,
        nextPieces: [],
        holdType: null,
        score: 0,
        level: 1,
        linesCleared: 0,
        status,
        durationSeconds: 0,
      };
    },
  };
}
