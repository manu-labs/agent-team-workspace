import { useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { useAuthStore } from '../stores/authStore';

export default function LoginPage() {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);
  const login = useAuthStore((s) => s.login);
  const navigate = useNavigate();

  const handleSubmit = async (e) => {
    e.preventDefault();
    setError('');
    setLoading(true);
    try {
      await login(username, password);
      navigate('/');
    } catch (err) {
      setError(err.message || 'Login failed');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="h-full flex items-center justify-center p-4">
      <div className="glass-panel p-8 w-full max-w-sm space-y-6">
        <h1 className="font-display text-xl font-bold tracking-wider text-center text-neon-cyan">
          Login
        </h1>
        <form onSubmit={handleSubmit} className="space-y-4">
          {error && (
            <p className="text-neon-red text-sm text-center">{error}</p>
          )}
          <div>
            <label className="block text-xs text-white/40 font-mono mb-1">Username</label>
            <input
              type="text"
              value={username}
              onChange={(e) => setUsername(e.target.value)}
              className="w-full px-3 py-2 rounded-lg bg-space-700/60 border border-white/10 text-white font-mono text-sm focus:outline-none focus:border-neon-cyan/50"
              required
            />
          </div>
          <div>
            <label className="block text-xs text-white/40 font-mono mb-1">Password</label>
            <input
              type="password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              className="w-full px-3 py-2 rounded-lg bg-space-700/60 border border-white/10 text-white font-mono text-sm focus:outline-none focus:border-neon-cyan/50"
              required
            />
          </div>
          <button type="submit" disabled={loading} className="btn-primary w-full">
            {loading ? 'Logging in...' : 'Login'}
          </button>
        </form>
        <p className="text-center text-sm text-white/40">
          No account?{' '}
          <Link to="/register" className="text-neon-cyan hover:underline">Create one</Link>
        </p>
      </div>
    </div>
  );
}
