<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dino Dress-Up!</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay" aria-live="polite" aria-label="Loading game">
    <div class="loading-content">
      <div class="loading-dino-icon" aria-hidden="true">ğŸ¦•</div>
      <h2 class="loading-title">Dino Dress-Up!</h2>
      <div class="loading-bar-track">
        <div id="loading-bar" class="loading-bar"></div>
      </div>
      <p id="loading-status" class="loading-status">Starting upâ€¦</p>
    </div>
  </div>

  <!-- No WebGPU Fallback -->
  <div id="no-webgpu" class="no-webgpu hidden" role="alert">
    <div class="no-webgpu-content">
      <span class="no-webgpu-icon" aria-hidden="true">ğŸ˜¢</span>
      <h2>WebGPU Not Supported</h2>
      <p>Your browser does not support <strong>WebGPU</strong>.</p>
      <p>Please try <a href="https://www.google.com/chrome/" target="_blank" rel="noopener">Chrome 113+</a> or <a href="https://www.microsoft.com/edge" target="_blank" rel="noopener">Edge 113+</a>.</p>
      <button class="btn btn-primary" onclick="location.reload()">Try Again</button>
    </div>
  </div>

  <!-- App Root -->
  <div id="app" class="app hidden">

    <!-- SCREEN: DINO SELECTION -->
    <section id="screen-selection" class="screen screen-selection" aria-label="Choose your dinosaur">
      <header class="selection-header">
        <h1 class="selection-title">
          <span class="title-emoji" aria-hidden="true">ğŸ¦–</span>
          Dino Dress-Up!
          <span class="title-emoji" aria-hidden="true">ğŸ¦•</span>
        </h1>
        <p class="selection-subtitle">Pick your dino to get started!</p>
      </header>

      <div id="dino-card-grid" class="dino-card-grid" role="list" aria-label="Dinosaur options">
        <!-- DinoPreviewCard x3 inserted by JS -->
      </div>

      <footer class="selection-footer">
        <p class="selection-hint">Click a dinosaur to start dressing!</p>
      </footer>
    </section>

    <!-- SCREEN: DRESSING ROOM -->
    <section id="screen-dressing" class="screen screen-dressing hidden" aria-label="Dressing room">

      <!-- Toolbar -->
      <div id="toolbar" class="toolbar" role="toolbar" aria-label="Dressing controls">
        <button data-action="back" class="btn btn-secondary btn-sm" aria-label="Go back to dino selection">â† Back</button>
        <span id="toolbar-dino-name" class="toolbar-dino-name"></span>
        <div class="toolbar-spacer"></div>
        <button data-action="clear" class="btn btn-secondary btn-sm" aria-label="Remove all clothing">Clear All</button>
        <button data-action="randomize" class="btn btn-accent btn-sm" aria-label="Apply a random outfit">ğŸ² Randomize</button>
        <button data-action="done" class="btn btn-primary btn-sm" aria-label="Finish dressing">Done! âœ¨</button>
      </div>

      <!-- Main content: canvas + sidebar -->
      <div class="dressing-body">

        <!-- Canvas Area -->
        <div class="canvas-area">
          <div class="canvas-wrapper" id="canvas-wrapper">
            <canvas id="dino-canvas" width="800" height="800" aria-label="Dinosaur dress-up canvas" tabindex="0"></canvas>
            <div id="canvas-drop-highlight" class="canvas-drop-highlight hidden" aria-hidden="true"></div>
            <div id="confetti-layer" class="confetti-layer" aria-hidden="true"></div>
          </div>

          <div class="canvas-stats" aria-live="polite">
            <span id="stat-dino-name" class="stat-dino-name"></span>
            <span class="stat-divider" aria-hidden="true">Â·</span>
            <span id="stat-item-count" class="stat-item-count">0 items worn</span>
          </div>
        </div>

        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar" aria-label="Clothing items">
          <nav id="category-tabs" class="category-tabs" role="tablist" aria-label="Clothing categories"></nav>
          <div id="item-grid" class="item-grid" role="tabpanel" aria-label="Clothing items in selected category"></div>
          <div class="sidebar-footer">
            <span id="sidebar-applied-count" class="sidebar-applied-count" aria-live="polite">0 items applied</span>
            <button id="sidebar-clear-btn" class="btn btn-ghost btn-sm" aria-label="Clear all clothing items">Clear All</button>
          </div>
        </aside>

      </div>
    </section>

    <!-- SCREEN: FINISHED -->
    <section id="screen-finished" class="screen screen-finished hidden" aria-label="Your finished look">
      <header class="finished-header">
        <h1 class="finished-title">
          <span class="title-emoji" aria-hidden="true">ğŸ‰</span>
          Looking Amazing!
          <span class="title-emoji" aria-hidden="true">âœ¨</span>
        </h1>
        <p class="finished-subtitle">What a stylish dinosaur!</p>
      </header>

      <div class="finished-canvas-area">
        <div class="finished-canvas-wrapper">
          <canvas id="finished-canvas" width="800" height="800" aria-label="Your finished outfit"></canvas>
        </div>
      </div>

      <div class="finished-actions" role="group" aria-label="What would you like to do?">
        <button id="btn-save-image" class="btn btn-primary" aria-label="Save picture">ğŸ“¸ Save Picture</button>
        <button id="btn-dress-again" class="btn btn-accent" aria-label="Dress again">ğŸ‘— Dress Again</button>
        <button id="btn-new-dino" class="btn btn-secondary" aria-label="Pick a different dinosaur">ğŸ¦– New Dino</button>
      </div>

      <div id="finished-confetti" class="confetti-layer" aria-hidden="true"></div>
    </section>

  </div>

  <script type="module" src="src/main.js"></script>

  <noscript>
    <div style="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#fff8f0;font-family:sans-serif;text-align:center;padding:2rem;z-index:9999;">
      <p><strong>Dino Dress-Up requires JavaScript.</strong><br/>Please enable JavaScript and reload.</p>
    </div>
  </noscript>

</body>
</html>